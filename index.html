<!DOCTYPE html>
<html lang="en">
<head>
  <title>Call Window</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- BOOTSTRAP STUFF -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


<style>
	.callWindowOpen {
		display:none;
	}

</style>





</head>


<body>



<h2>Call window</h2>




<!--
	How the timezones are coded:
	1 = UTC-8
	2 = UTC-7
	3 = UTC+8
-->


<h3>Where does your friend live?</h3>
<select id="elementId">
  <option value="1">California</option>
  <option value="1" >Nevada</option>
  <option value="1">Oregon</option>
  <option value="1">Washington</option>
  <option value="2">Colorado</option>
  <option value="2">Montanta</option>
  <option value="2">New Mexico</option>
  <option value="2">Utah</option>
  <option value="3">Beijing</option>

</select>


<p id="sf"></p>

<div  class="alert alert-success callWindowOpen">

</div>



<button   none class="btn btn-primary" onclick="myFunction()">Get call window</button>

<script type="text/javascript">

function myFunction() {
	var e = document.getElementById("elementId");
	var value = e.options[e.selectedIndex].value;
	var userPlace = e.options[e.selectedIndex].text;   
	//document.getElementById("Stuff").innerHTML = value;


	var d = new Date();
    var utcHour = d.getUTCHours();
    var timeOffsetFromUTC = d.getTimezoneOffset();
 

    //	Sets the local time
    var localTime = utcHour - (timeOffsetFromUTC/60);


    if (value == 1) {		//	Handles UTC-8 case
    	    // Convert localtime to UTC-8 and check if they are upp
    	if ((((utcHour - 8) > 7) && ((utcHour - 8) < 23)) && ((localTime) > 7) && ((localTime) < 23)) {
    		    //document.getElementById("sf").innerHTML = "You can call UTC-8 time:  " + (utcHour - 8) + " The local time is:  " + localTime;
    		    document.getElementById("callWindowOpen").innerHTML = "You can call " + userPlace + " because the time there is about " + (utcHour - 8);				//	The minutes dont show upp



	    } else {
 		   	   	document.getElementById("sf").innerHTML = "Dont call " + userPlace + " is still sleeping";
 		   	   	document.getElementById("callWindowOpen").style.display = 'none';
  	  }
    } else if (value == 2) {	//	Handles UTC-7 case

    	    	    // Convert localtime to UTC-8 and check if they are upp
    	if ((((utcHour - 7) > 7) && ((utcHour - 7) < 23)) && ((localTime) > 7) && ((localTime) < 23)) {
    		    //document.getElementById("sf").innerHTML = "You can call UTC-8 time:  " + (utcHour - 8) + " The local time is:  " + localTime;
    		    document.getElementById("sf").innerHTML = "You can call " + userPlace + " because the time there is about " + (utcHour - 7);				//	The minutes dont show upp



	    } else {
 		   	   	document.getElementById("sf").innerHTML = "Dont call " + userPlace + " is still sleeping";
 		   	}
  	  } else if (value == 3) {


    	    	    // Convert localtime to UTC-8 and check if they are upp
    	if ((((utcHour + 8) > 7) && ((utcHour + 8) < 23)) && ((localTime) > 7) && ((localTime) < 23)) {
    		    //document.getElementById("sf").innerHTML = "You can call UTC-8 time:  " + (utcHour - 8) + " The local time is:  " + localTime;
    		    document.getElementById("sf").innerHTML = "You can call " + userPlace + " because the time there is about " + (utcHour - 7);				//	The minutes dont show upp



	    } else {
 		   	   	document.getElementById("sf").innerHTML = "Dont call " + userPlace + " is still sleeping";
 		   	}
 	}

 }












</script>







</body>
</html>